<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>Ù…Ø­ÙØ¸ØªÙŠ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
</head>
<body>

<script type="module">
  import { supabase } from "./supabase.js";
  const { data: { session } } = await supabase.auth.getSession();
  if (!session) window.location.href = "index.html";
</script>

<div class="box">
  <h1>ğŸ’° Ù…Ø­ÙØ¸ØªÙŠ</h1>

  <p id="balance">Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù…ÙŠÙ„...</p>

  <a href="home.html">â¬…ï¸ Ø±Ø¬ÙˆØ¹</a>
</div>

<script type="module">
  import { supabase } from "./supabase.js";

  const loadBalance = async () => {
    const { data: { session } } = await supabase.auth.getSession();
    const user = session.user;

    const { data } = await supabase
      .from("user_balance")
      .select("balance_usd")
      .eq("user_id", user.id)
      .single();

    document.getElementById("balance").innerText =
      "Ø§Ù„Ø±ØµÙŠØ¯: $" + (data?.balance_usd ?? 0);
  };

  loadBalance();
</script>

</body>
</html>
