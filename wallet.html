<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Ø¨ÙŠØªÙƒÙˆÙŠÙ† ÙƒØ§Ø´ - Ø§Ù„Ù…Ø­ÙØ¸Ø©</title>
<link rel="stylesheet" href="style.css"/>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="supabase.js"></script>
<script src="app.js"></script>
</head>
<body>
<div class="header">Ø§Ù„Ù…Ø­ÙØ¸Ø©</div>

<div class="container">
  <div class="card">
    <div class="small">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹</div>
    <div style="margin-top:10px;word-break:break-all;border:1px solid rgba(255,255,255,.12);border-radius:14px;padding:12px;background:#0b0b0b">
      TPNoGerv1EMBSdrs9Yca93eCQUVsoNiRvq
    </div>
    <a class="btn btn-gold" href="payment-proof.html">ğŸ“¤ Ø¥Ø«Ø¨Ø§Øª Ø§Ù„Ø¯ÙØ¹</a>
    <p class="small">Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹ ÙŠØªÙ… Ø¨Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø£Ø¯Ù…Ù†.</p>
  </div>

  <div class="card">
    <div class="small">Ø¥ÙŠØ¯Ø§Ø¹Ø§ØªÙƒ</div>
    <div id="deps" class="list"></div>
  </div>
</div>

<div class="nav">
  <a href="home.html" data-nav="home"><span class="ico">ğŸ </span><small>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</small></a>
  <a href="ads.html" data-nav="ads"><span class="ico">ğŸ“º</span><small>Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª</small></a>
  <a href="wallet.html" data-nav="wallet" class="active"><span class="ico">ğŸ’¼</span><small>Ø§Ù„Ù…Ø­ÙØ¸Ø©</small></a>
  <a href="about.html" data-nav="about"><span class="ico">â„¹ï¸</span><small>Ù…Ù† Ù†Ø­Ù†</small></a>
</div>

<script>
setNav("wallet");
async function load(){
  const s=await requireAuth(); if(!s) return;
  const { data, error } = await supabase.from("deposits").select("*").eq("user_id", s.user.id).order("id",{ascending:false});
  const box=document.getElementById("deps"); box.innerHTML="";
  if(error){ box.innerHTML="<div class='item'>Ø®Ø·Ø£</div>"; return; }
  if(!data||data.length===0){ box.innerHTML="<div class='item'>Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¥ÙŠØ¯Ø§Ø¹Ø§Øª</div>"; return; }
  data.forEach(d=>{
    box.innerHTML+=`
      <div class="item">
        <div class="top">
          <div>
            <div class="title">Ø¥ÙŠØ¯Ø§Ø¹ #${d.id} â€” $${d.amount_usd}</div>
            <div class="meta">${new Date(d.created_at).toLocaleString()}</div>
          </div>
          <span class="badge ${badgeClass(d.status)}">${d.status}</span>
        </div>
      </div>`;
  });
}
load();
</script>
</body>
</html>
